"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[7975],{57975:(e,n,i)=>{i.d(n,{W:()=>G});var t=i(64467),a=i(96540),l=i(74346),o=i(26557),d=i(22213),r=i(69650),s=i(12600),u=i(72541),m=i(11828),c=i(80182),k=i(80074),p=i(27721),v=i(1722),S=i(19228),N=i(43634),g=i(47676),F=i(49287),f=i(56743),b=i(75599),y=i(39160),C=i(51771),h=i(46879),w=i(17745),O=i(32318),E=i(80045),_=i(65364),D=i(14281),U=i(1037),T=i(22541),P=i(54654),I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostVotersDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"voters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserInListDialog_user"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButton_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedIn_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignInOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignUpOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiContainer_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SignInOptions_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SignUpOptions_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedOut_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userUrl_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hasSubdomain"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"membership"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tier"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiContainer_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButtonSignedOut_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedIn_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedOut_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserInListDialog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserFollowButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserFollowButtonSignedOut_post"}}]}}]},j=["__typename"];function L(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function V(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?L(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var x=10,B=function(e){var n=e.post,i=e.hide,t=e.isVisible,l=e.fetchMore,o=e.loading;if(!n)return null;var d=n.title,r=n.voters,s=n.clapCount,u=n.voterCount;return a.createElement(U.X,{isVisible:t,fetchMore:l,loading:o,hide:i,title:d,clapCount:null!=s?s:0,voterCount:null!=u?u:0,voters:r?r.items.map((function(e,i){var t=e.user,l=e.clapCount;return t&&a.createElement(F.Ne,{source:{name:"post_clappers",postId:n.id,index:i}},a.createElement(D.B,{user:t,key:t.id,followButton:a.createElement(P.P,{buttonSize:"SMALL",post:n,user:t,susiEntry:"follow_list"}),badge:a.createElement(T._,{clapCount:l})}))})):null})};function A(e){var n=e.postId,i=e.isVisible,t=e.hide;return i?a.createElement(_.X,{ssr:!1,query:I,variables:{postId:n,pagingOptions:{limit:x}},notifyOnNetworkStatusChange:!0},(function(e){var n,l=e.data,o=(l=void 0===l?{}:l).post,d=e.loading,r=e.error,s=e.fetchMore;if(r||null==o||!o.voters)return null;var u=o.voters.pagingInfo&&o.voters.pagingInfo.next;if(u){u.__typename;var m=(0,E.A)(u,j);n=function(){return s({variables:{pagingOptions:V(V({},m),{},{limit:x})}})}}return a.createElement(B,{hide:t,fetchMore:n,post:o,isVisible:i,loading:d})})):null}var H=i(5600),R=i(85864);function M(e){var n=e.clapCount,i=e.hasLabel,t=void 0!==i&&i,l=e.showFullNumber,o=void 0!==l&&l,d=e.post,r=e.hasDialog,s=void 0!==r&&r,u=e.shouldShowResponsiveLabelText,m=void 0!==u&&u,c=e.shouldHideClapsText,k=void 0!==c&&c,p=e.countColor,v=e.countScale,S=e.isLoading,N=void 0!==S&&S,g=d.id;if(!(n>0||N))return null;var F=function(e){var i=e.showVoters;return a.createElement(O.q,{showVoters:i,hasLabel:t,showFullNumber:o,shouldShowResponsiveLabelText:m,shouldHideClapsText:k,clapCount:n,countColor:p,countScale:v,isLoading:N})};return s&&g&&!N?a.createElement(R.B,null,(function(e){var n=e.isVisible,i=e.show,t=e.hide;return a.createElement(a.Fragment,null,a.createElement(H.G,{tooltipText:"View Claps",targetDistance:15},a.createElement(F,{showVoters:i})),n&&a.createElement(A,{isVisible:!0,hide:t,postId:g}))})):a.createElement(F,null)}var q=i(11517);function X(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function z(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?X(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Y=function(e){var n,i=e.post,t=e.buttonStyle,O=e.hasDialog,E=e.shouldShowResponsiveLabelText,_=void 0!==E&&E,D=e.shouldHideClapsText,U=void 0!==D&&D,T=e.shouldHideClapsCount,P=void 0!==T&&T,I=e.susiEntry,j=e.verticalClapsText,L=void 0!==j&&j,V=e.buttonColor,x=e.countScale,B=e.testId,A=(0,q.N)({post:i}),H=A.clapCount,R=A.clapCountLoading,X=z(z({},i),{},{clapCount:H}),Y=(0,w.f)(),G=(0,p.R)(),K=G.value,Q=G.loading,W=null!==(n=null==K?void 0:K.id)&&void 0!==n?n:"",$=(0,v.h)(i).viewerEdge,J=(0,y.d4)((function(e){return e.config.authDomain})),Z=(0,y.Dy)((function(e){return e.multiVote.clapsPerPost})),ee=(0,b.w)(),ne=(0,g.$L)(),ie=(0,F.jI)(),te=(0,C.F)(Z,X,$),ae=te.clapCount,le=te.viewerClapCount,oe=te.viewerHasClappedSinceFetch,de=(0,a.useCallback)((function(){if(le&&le>=c.et)return"Viewer exceeded authorized claps limit.";var e;e={postId:i.id,clapCount:ae+1,viewerClapCount:le+1,viewerHasClappedSinceFetch:!0},ee((0,f.K7)(e))}),[le,i.id,ae]),re=(0,a.useCallback)((function(e){Y(X,W,e,$),ne.event("post.clientUpvote",{postId:i.id,postIds:[i.id],voteCount:e,source:ie})}),[i.id,W,$,ie]),se=(0,k.s)({onIncrementClaps:de,onSubmitClapsAccumulated:re}),ue=se.clappedAt,me=se.onFloatEnd,ce=se.removeBurst,ke=se.clap,pe=se.isPopping,ve=se.isShowingViewerClapCount,Se=se.burstOffsets,Ne=se.onPopEnd;(0,a.useEffect)((function(){return function(){var e;e={postId:i.id},ee((0,f.dy)(e))}}),[]);var ge,Fe=i.collection,fe=i.creator,be=i.id,ye=i.isPublished,Ce=i.isLimitedState,he=(ge=!(!fe||fe.id!==W),Ce?"This feature is temporarily disabled":ye?ge?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),we=(0,c.vP)(t,_),Oe=we.alwaysShowClapsLabel,Ee=we.hasClapsLabel,_e=we.buttonScale,De=!!(le&&le>0),Ue=!!(ae&&ae>0),Te=Fe&&Fe.slug?(0,h.jXU)(J,Fe.slug,be):(0,h.A4e)(J,be);return a.createElement(d.R,{verticalClapsText:L},a.createElement(s.O,{buttonStyle:t,hasClaps:Ue||R},W||he?a.createElement(a.Fragment,null,ve&&a.createElement(S.Cq,null,a.createElement(r.u,{count:le,clappedAt:ue,onFloatEnd:me})),a.createElement(m.s,{isPopping:pe,onPopEnd:Ne},a.createElement(o.g,{buttonColor:V,disableReason:he,isFilled:De,isLoading:Q||R,onClickAndHold:ke,scale:_e,shouldHideClapsText:U,testId:B})),Se.map((function(e){return a.createElement(l.S,{key:e,offset:e,onBurstEnd:ce})}))):a.createElement(N.r,{operation:"register",post:i,user:i.creator||void 0,actionUrl:Te,susiEntry:I,testId:B},a.createElement(o.g,{scale:_e,buttonColor:V,shouldHideClapsText:U,testId:B}))),(Ue||R)&&!P&&(!ve||Oe)&&a.createElement(u.T,{buttonStyle:t},a.createElement(M,{post:i,clapCount:ae,showFullNumber:oe,hasLabel:Ee,hasDialog:O,shouldShowResponsiveLabelText:_,shouldHideClapsText:U,countColor:V,countScale:x,isLoading:R})))},G=function(e){var n;return a.createElement(F.Ne,{source:{postId:null===(n=e.post)||void 0===n?void 0:n.id},extendSource:!0},a.createElement(Y,e))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7975.d44b0cb9.chunk.js.map
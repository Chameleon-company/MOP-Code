"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[3054],{1417:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{fill:"#242424",fillRule:"evenodd",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0m1 0c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-9.073-4.745a.25.25 0 0 0-.25-.255H11.48a.25.25 0 0 0-.25.255l.134 6.292a.25.25 0 0 0 .25.245h.934a.25.25 0 0 0 .25-.244zM11 16.245c0-.653.436-1.082 1.089-1.082h.01c.653 0 1.075.43 1.075 1.083 0 .64-.432 1.068-1.084 1.068-.654 0-1.09-.429-1.09-1.068",clipRule:"evenodd"})))}},49470:(e,n,i)=>{i.d(n,{A:()=>o});var t,a=i(96540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},l.apply(null,arguments)}const o=function(e){return a.createElement("svg",l({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=a.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18M8.25 12h7.5"})))}},94971:(e,n,i)=>{i.d(n,{C:()=>d});var t=i(96540),a=i(52290),l=i(86527),o=i(46879);function d(e){var n=e.entityName,i=void 0===n?"story":n;return t.createElement(a.a,{textAlign:"center",testId:"deleteStoryModalText"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",t.createElement(l.N,{target:"_blank",href:o.Xj4,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",i),".")}},43849:(e,n,i)=>{i.d(n,{$:()=>k,J:()=>u});var t=i(80296),a=i(96540),l=i(44402),o=i(42976),d=i(60603),r=i(8963),s=i(34507),m=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":"450px",opacity:e?0:1}},c=(0,a.createContext)({});function u(e){var n=e.children,i=e.post,u=(0,l.l)(),k=(0,a.useRef)(!1),v=(0,s.K)(i.id,"cache-only").explicitSignal,p=(0,a.useState)(v===o.WN.SHOW_LESS),N=(0,t.A)(p,2),g=N[0],S=N[1],f=(0,d.e)(!1),b=(0,t.A)(f,3),h=b[0],y=b[1],E=b[2],F=(0,a.useCallback)((function(e){g&&k.current&&"max-height"===e.propertyName&&(y(),k.current=!1)}),[g]),C=(0,a.useCallback)((function(){k.current=!0,S(!0)}),[]),w=(0,a.useCallback)((function(){S(!1)}),[]),P=(0,a.useMemo)((function(){return{animateShowLess:C,animateUndo:w}}),[C,w]);return a.createElement(c.Provider,{value:P},a.createElement("div",{className:u(m(g)),onTransitionEnd:F},n),a.createElement(r.b,{post:i,isVisible:h,hide:E}))}var k=function(){return(0,a.useContext)(c)}},8963:(e,n,i)=>{i.d(n,{b:()=>F});var t,a=i(80296),l=i(96540),o=i(17045),d=i(53843),r=i(2550),s=i(21335),m=i(71984),c=i(52290),u=i(94170),k=i(49287),v=i(42976),p=i(60603),N=i(55981),g=i(36557),S=i(44402);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},f.apply(null,arguments)}const b=function(e){return l.createElement("svg",f({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),t||(t=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M4.292 9.5v5H2v-5zm1-.124v5.248l.105.08L13 20.484V3.516l-7.603 5.78zm7.905-7.266L4.792 8.5H1.5A.5.5 0 0 0 1 9v6a.5.5 0 0 0 .5.5h3.292l8.405 6.39a.5.5 0 0 0 .803-.398V2.508a.5.5 0 0 0-.803-.398m5.657 7.035a.5.5 0 0 0-.708.707L20.293 12l-2.147 2.148a.5.5 0 1 0 .708.707L21 12.707l2.146 2.148a.5.5 0 1 0 .708-.707L21.707 12l2.147-2.148a.5.5 0 1 0-.708-.707L21 11.293z",clipRule:"evenodd"})))};var h=function(e){return function(n){return{padding:"16px 24px",border:"none",cursor:"pointer",display:"flex","&:first-of-type":{paddingTop:"20px"},"&:last-of-type":{paddingBottom:"20px"},"&:not(:last-of-type)":{borderBottom:"1px solid ".concat(n.colorTokens.border.neutral.primary.base)},"& svg path":{fill:e?n.colorTokens.foreground.error.primary.base:n.colorTokens.foreground.neutral.secondary.base},":hover svg path":{fill:e?n.colorTokens.foreground.error.primary.hover:n.colorTokens.foreground.neutral.primary.base}}}};function y(e){var n=e.onClick,i=e.isReport,t=e.text,a=e.detail,o=(0,S.l)();return l.createElement("button",{className:o(h(i)),onClick:n},i?l.createElement(N.n,null):l.createElement(b,null),l.createElement(c.a,{marginLeft:"24px",display:"flex",flexDirection:"column",gap:"4px",textAlign:"left"},l.createElement(g.kZ,{scale:"M",color:i?"ERROR":"DARKER",clamp:1},t),a&&l.createElement(g.kZ,{scale:"S",clamp:1},a)))}var E=i(34507);function F(e){var n,i,t=e.hide,d=e.isVisible,c=e.post,u=null!==(n=null===(i=c.creator)||void 0===i?void 0:i.id)&&void 0!==n?n:"",v=(0,s.cd)({id:u}).viewerEdge,N=(0,r.A)().viewerId,g=(0,p.e)(!1),S=(0,a.A)(g,3),f=S[0],b=S[1],h=S[2],y=(0,o.M)({viewerId:N,targetAuthorId:u,targetPostId:c.id,onOptimisticComplete:h}),E=(0,l.useCallback)((function(){b(),t()}),[t]);return l.createElement(l.Fragment,null,d&&l.createElement(k.Ne,{source:{dimension:"negative_signal_modal"},extendSource:!0},l.createElement(C,{post:c,report:E,hide:t})),l.createElement(m.e,{isVisible:f,hide:h,type:"story",alreadyBlocking:!(null==v||!v.isBlocking),onSubmit:y}))}function C(e){var n=e.post,i=e.report,t=e.hide,o=(0,l.useState)(!1),d=(0,a.A)(o,2),r=d[0],s=d[1],m=(0,E.K)(n.id),k=m.undo,p=m.showUndoToast,N=(0,l.useCallback)((function(){r&&(p(v.WN.SHOW_LESS),s(!1)),t()}),[r,t]),g=(0,l.useCallback)((function(){k(),s(!0)}),[k]);return l.createElement(u.a,{hide:N,title:"Got it, we'll recommend fewer like this",subtitleTextAlign:"center",subtitle:"You can additionally take any of the actions below.",padding:"40px 32px 32px",subtitleMargin:"16px",confirmButtonStyle:"BRAND",confirmText:"Done",cancelText:"Undo",cancelButtonStyle:"SUBTLE",onCancel:g},l.createElement(c.a,{display:"flex",justifyContent:"center",marginBottom:"32px"},l.createElement(c.a,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",borderRadius:"8px",border:"neutral.primary"},n.creator&&!n.creator.viewerEdge.isMuting&&l.createElement(w,{publisher:n.creator,hide:t}),n.collection&&!n.collection.viewerEdge.isMuting&&l.createElement(w,{publisher:n.collection,hide:t}),l.createElement(y,{onClick:i,isReport:!0,text:"Report story..."}))))}function w(e){var n=e.publisher,i=e.hide,t="User"===n.__typename,a=(0,d.d)({authorId:t?n.id:void 0,collectionId:t?void 0:n.id}),o=a.muteAuthor,r=a.mutePub,s=(0,l.useCallback)((function(){t?o():r(),i()}),[o,r,t]);return l.createElement(y,{onClick:s,text:"Mute ".concat(t?"author":"publication"),detail:n.name})}},34507:(e,n,i)=>{i.d(n,{K:()=>f});var t=i(64467),a=i(80296),l=i(95420),o=i(39181),d=i(96540),r=i(2550),s=i(47676),m=i(49287),c=i(42976),u=i(91830),k=i(97249),v=i(43849),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]};function g(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function S(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?g(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function f(e,n){var i,t,g=(0,s.$L)(),f=(0,m.Fo)()||{},b=(0,r.A)().viewerId,h=(0,u.zF)(),y=(0,v.$)().animateUndo,E=(0,l.n)(N),F=(0,a.A)(E,1)[0],C=(0,o.I)(p,{variables:{id:e},fetchPolicy:n}),w=C.data,P=C.loading,A=null==w||null===(i=w.post)||void 0===i||null===(t=i.viewerEdge)||void 0===t?void 0:t.explicitSignalState,I=(0,d.useCallback)((function(n){F({variables:{postId:e,signal:n},update:function(i){b&&i.modify({id:"PostViewerEdge:".concat((0,k.N)(e,b)),fields:{explicitSignalState:function(){return n===c.WN.CLEAR_SIGNAL?null:n}}})}})}),[F,e,b]),T=(0,d.useCallback)((function(n){var i=n.name,t=n.data,a=n.dimension;return g.event(i,S({postId:e,source:a?(0,m.wv)(S(S({},f),{},{dimension:a})):(0,m.wv)(f)},t))}),[e,f]),x=(0,d.useCallback)((function(e){var n=A===c.WN.SHOW_MORE;I(c.WN.CLEAR_SIGNAL),T({name:"post.see_".concat(n?"more":"less",".undo"),dimension:e}),n?_(c.WN.SHOW_MORE):null==y||y()}),[e,A,y]),O=(0,d.useCallback)((function(){I(c.WN.SHOW_MORE),T({name:"post.see_more"})}),[T,I]),D=(0,d.useCallback)((function(){I(c.WN.SHOW_LESS),T({name:"post.see_less",data:{mutationSent:!0}})}),[T,I]),_=(0,d.useCallback)((function(e){h({message:"Undone. We won’t recommend ".concat(e===c.WN.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}})}),[]),V=(0,d.useCallback)((function(){h({toastStyle:"USER_POSITIVE_SIGNAL",extraParams:{onClickUndo:function(){return x("toast")}}})}),[h,x]);return{loading:P,undo:x,showMore:O,showLess:D,explicitSignal:A,showUndoToast:_,showMoreToast:V}}},73054:(e,n,i)=>{i.d(n,{G:()=>gn});var t=i(58168),a=i(80045),l=i(96540),o=i(80296),d=i(64467),r=i(14792),s=i.n(r),m=i(39181),c=i(94971),u=i(45522),k=i(14782),v=i(86527),p=i(52290),N=i(85050);function g(e){var n=e.onClick,i=e.hidePopover,t=e.showAt,a=e.bookmarkIcon,o=(0,l.useCallback)((function(){i(),n()}),[n,i]);return l.createElement(N.V,{xs:t.xs,sm:t.sm,md:t.md,lg:t.lg,xl:t.xl},l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":"aria-id","aria-expanded":"false",onClick:o},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center",ariaHidden:"true",gap:"12px"},a,"Save"))),l.createElement(k.eS,null))}var S=i(69415),f=i(36557),b=i(61333),h={width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"};function y(e){var n=e.hidePopover,i=(0,S.y)(),t=i.areHighlightsHidden,a=i.toggleHideHighlights,d=(0,l.useState)(),r=(0,o.A)(d,2),s=r[0],m=r[1],c=(0,l.useCallback)((function(){a(),n()}),[n,a]);return(0,l.useEffect)((function(){m(navigator.userAgent)}),[]),l.createElement(k.q3,{paddingTopBottom:"6px"},l.createElement(v.N,{onClick:c,rules:h},l.createElement("span",null,t?"Show":"Hide"," highlights"),!(0,b.Gz)(s)&&l.createElement(p.a,{padding:"2px 6px",borderRadius:"4px",border:"neutral.tertiary"},l.createElement(f.kZ,{scale:"XS"},(0,b.cX)(s)?"⌘":"Ctrl"," /"))))}var E=i(70521),F=i(17745),C=i(27721),w=i(1722),P=i(56743),A=i(75599),I=i(39160),T=i(51771),x=function(e){var n=e.post,i=e.hidePopover,t=e.showHideHighlights,a=(0,C.R)().value,o=null==a?void 0:a.id,d=(0,w.h)(n).viewerEdge,r=(0,A.w)(),s=l.useCallback((function(e){return r((0,P.K7)(e))}),[r]),m=(0,I.Dy)((function(e){return e.multiVote.clapsPerPost})),c=(0,T.F)(m,n,d),u=c.clapCount,p=c.viewerClapCount,N=(0,F.f)(),g=o&&u&&p&&p>0;return g||t?l.createElement(l.Fragment,null,!!g&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){N(n,(null==a?void 0:a.id)||"",-p,d),s({postId:n.id,clapCount:u-p,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),i()}},"Undo claps")),l.createElement(k.eS,null)):null},O=i(23496),D=i(44929),_=i(49534),V=i(58285),R=i(9942),M=i(4369),H=i(5249),L=i(71468),B=i(91830),j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},U=(0,L.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(H.s,{mutation:j,onCompleted:function(){i((0,B.MZ)({message:"Responses are now hidden for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!1}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),W=(0,L.Ng)()((function(e){var n=e.children,i=e.dispatch,t=e.onCompleted,a=e.targetPostId;return l.createElement(H.s,{mutation:j,onCompleted:function(){i((0,B.MZ)({message:"Responses are now shown for this post."})),t&&t()},variables:{targetPostId:a,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:a,allowResponses:!0}}},(function(e){return l.createElement(l.Fragment,null,n({mutate:e}))}))})),z=i(22036),Z=i(60603),q=function(e){var n=e.hidePopover,i=e.postId,t=e.allowResponses,a=(0,Z.e)(!1),d=(0,o.A)(a,3),r=d[0],s=d[1],m=d[2],c=function(){m(),n()};return l.createElement(l.Fragment,null,l.createElement(U,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(z.n,{onConfirm:n,isVisible:r,hide:c,entityTypename:"Post"})})),l.createElement(W,{targetPostId:i},(function(e){var n=e.mutate;return l.createElement(k.q3,null,l.createElement(v.N,{onClick:function(){t?s():n()}},t?"Hide responses":"Show responses"))})))},G=i(65364),$=i(28899),K={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]},Y=i(95420),J=i(42976),Q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},X={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}]},ee=function(e){var n=(0,Y.n)(Q),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:J.d6.APPROVED}})}),[e])},ne=function(e){var n=(0,Y.n)(X),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:J.d6.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},ie=i(52764),te=i(3005),ae=i(99731),le=i(85864),oe=i(24960),de=i(53908),re=i(56942),se=i(27622),me=i(66305),ce="collectionSubmissionPopover",ue=[{name:"",value:"No publication",content:l.createElement(p.a,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},"No publication"))}];function ke(e){var n=e.collection;return n.name?l.createElement(p.a,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},l.createElement(f.kZ,{scale:"M",color:"DARKER"},n.name),l.createElement($.u,{collection:n,size:32})):null}function ve(e){var n=e.show,i=e.post,t=i.statusForCollection,a=i.isPublished,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1];return s||me.R5.on("load",(function(){return m(!0)})),!t&&a&&s?l.createElement(Ne,{post:i,noQueryReturn:null},(function(e){var t=e.loading,a=e.error,o=e.data;if(t||a)return null;var d=(void 0===o?{viewer:void 0}:o).viewer,r=i.creator;if(!d||!r||d.id!==r.id)return null;var s=d.adminCollections,m=d.writerCollections;return 0===s.length&&0===m.length?null:l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":ce,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function pe(e){var n=e.isVisible,i=e.hide;return l.createElement(te.l,{isVisible:n,hide:i,withCloseButton:!0},l.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},l.createElement(re.DZ,{scale:"M",tag:"h3"},"Story submitted"),l.createElement(p.a,{paddingTop:"8px",paddingBottom:"24px"},l.createElement(se.Pd,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),l.createElement(ae.$n,{buttonStyle:"OBVIOUS",onClick:i},"OK")))}var Ne=function(e){var n=e.children,i=e.post,t=e.noQueryReturn,a=i.creator;return a?l.createElement(ie.c,null,(function(e){return e?e.id!==a.id?l.createElement(l.Fragment,null,t):l.createElement(G.X,{query:K,ssr:!1},(function(e){var i=e.loading,t=e.error,a=e.data;return l.createElement(l.Fragment,null,n({loading:i,error:t,data:a}))})):l.createElement(l.Fragment,null,t)})):l.createElement(l.Fragment,null,t)},ge=function(e){var n=e.post,i=e.hide,t=e.isVisible,a=e.children,d=l.useState(!1),r=(0,o.A)(d,2),s=r[0],m=r[1],c=l.useState(""),u=(0,o.A)(c,2),k=u[0],N=u[1],g=ee(n),S=function(e){var n=(0,Y.n)(Q),i=(0,o.A)(n,1)[0];return(0,l.useCallback)((function(n){return i({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:J.d6.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:J.d6.PENDING,pendingCollection:n}}})}),[e])}(n);return s||me.R5.on("load",(function(){return m(!0)})),n.isPublished&&s?l.createElement(le.B,null,(function(e){var o=e.isVisible,d=e.hide,r=e.show;return l.createElement(l.Fragment,null,l.createElement(pe,{hide:d,isVisible:o}),l.createElement(Ne,{post:n,noQueryReturn:a},(function(e){var o=e.loading,d=e.error,s=e.data,m=void 0===s?{viewer:void 0}:s;if(o||d)return l.createElement(l.Fragment,null,a);var c=m.viewer,u=n.creator;if(!c||!u||c.id!==u.id)return l.createElement(l.Fragment,null,a);var b=c.adminCollections,h=c.writerCollections;if(0===b.length&&0===h.length)return l.createElement(l.Fragment,null,a);var y=b.concat(h).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:l.createElement(ke,{collection:e})}})),E=ue.concat(y),F=b.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),C=h.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(k){var P=E.find((function(e){return e.name===k}));P&&(w=P.value)}var A="addStoryToPublicationTitle";return l.createElement(oe.A,{ariaId:ce,hide:i,isVisible:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},l.createElement(f.kZ,{scale:"M",color:"DARKER",ariaLabelledById:A},"Add your story to a publication:"),l.createElement(p.a,{marginTop:"10px",position:"relative"},l.createElement(p.a,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),l.createElement(p.a,{maxHeight:"160px",overflow:"auto"},l.createElement(de.z,{value:w,onChange:N,options:E,radioButtonsName:"addStory",ariaLabelledBy:A}))),l.createElement(p.a,{display:"flex",marginTop:"20px"},k in F?l.createElement(ae.$n,{onClick:function(){var e=F[k];i(),g(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):l.createElement(ae.$n,{onClick:function(){var e=C[k];S(e),i(),r()},disabled:!k},"Submit"),l.createElement(p.a,{marginLeft:"10px"},l.createElement(f.kZ,{scale:"M",color:"LIGHTER"},l.createElement(v.N,{onClick:i},l.createElement(p.a,{padding:"10px"},"Cancel"))))),l.createElement(p.a,{marginTop:"10px"},l.createElement(f.kZ,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},a)})))})):l.createElement(l.Fragment,null,a)},Se=function(e){var n=e.children,i=e.isVisible,t=e.post,a=e.hide,o=ee(t),d=ne(t),r=(0,A.w)(),s=t.pendingCollection;return s?l.createElement(oe.A,{ariaId:"manageSubmissionPopover",isVisible:i,hide:a,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement($.u,{collection:s,size:40})),l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",s.name,".")),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(ae.$n,{buttonStyle:"OBVIOUS",onClick:function(){a(),o(t.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),l.createElement(ae.$n,{buttonStyle:"SUBTLE",onClick:function(){d(t.pendingCollection).then((function(){r((0,B.MZ)({message:"Story removed from ".concat(s.name||"publication")}))})),a()}},"Don't accept")))}},n):l.createElement(l.Fragment,null,n)},fe=function(e,n){return n&&e.creator&&n.id===e.creator.id},be=i(86329),he="removeFromPublicationPopover",ye=function(e){var n=e.viewer,i=e.show,t=e.post,a=(0,be.J)(t.pendingCollection||t.collection).viewerEdge,o=null==a?void 0:a.isEditor;return n&&("APPROVED"===t.statusForCollection&&(o||function(e,n){var i=e.pendingCollection||e.collection;return i&&i.creator&&n.id===i.creator.id}(t,n)||fe(t,n))||"PENDING"===t.statusForCollection&&fe(t,n))?l.createElement(k.q3,null,l.createElement(v.N,{"aria-controls":he,"aria-expanded":"false",onClick:i},"Remove story from publication")):null},Ee=function(e){var n=e.children,i=e.isVisible,t=e.hide,a=e.post,o=e.viewer,d=(0,A.w)(),r=ne(a),s=a.collection||a.pendingCollection;return s?l.createElement(oe.A,{ariaId:he,isVisible:i,hide:t,popoverRenderFn:function(){return l.createElement(p.a,{padding:"16px",maxWidth:"280px"},l.createElement(p.a,{display:"flex",flexDirection:"row",alignItems:"center"},l.createElement(p.a,{paddingRight:"8px"},l.createElement($.u,{collection:s,size:40})),"APPROVED"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},fe(a,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===a.statusForCollection?l.createElement(f.kZ,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):l.createElement(f.kZ,{scale:"S"},"This draft is submitted to ",s.name)),l.createElement(p.a,{flexDirection:"row",display:"flex",paddingTop:"16px"},l.createElement(p.a,{paddingRight:"8px"},l.createElement(ae.$n,{buttonStyle:"SUBTLE",onClick:function(){r(s).then((function(){d((0,B.MZ)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){d((0,B.MZ)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),t()}},"PENDING"===a.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):l.createElement(l.Fragment,null,n)},Fe=i(38714),Ce=i(89142),we=i(32038),Pe=i(19723),Ae=i(43634),Ie=i(59348),Te=i(88308),xe=i(21335),Oe=i(71984),De=i(17045),_e=function(e){var n=e.hidePopover,i=e.targetUserId,t=e.postId,a=e.viewerId,d=(0,xe.cd)({id:i}).viewerEdge,r=!(null==d||!d.isBlocking),s=(0,Z.e)(!1),m=(0,o.A)(s,3),c=m[0],u=m[1],p=m[2],N=(0,l.useCallback)((function(){p(),n()}),[n,p]),g=(0,De.M)({viewerId:a,targetAuthorId:i,targetPostId:t,onOptimisticComplete:N});return l.createElement(l.Fragment,null,l.createElement(Oe.e,{onSubmit:g,isVisible:c,hide:N,type:"story",alreadyBlocking:r}),l.createElement(k.q3,null,l.createElement(v.N,{onClick:u,color:"RED"},"Report story...")))},Ve=i(48011);function Re(e){var n,i=(0,C.R)().value,t=(0,l.useState)(!(null==i||!i.dismissableFlags.includes(e))),a=(0,o.A)(t,2),d=a[0],r=a[1],s=(0,Y.n)(Ve.x,{variables:{userId:null!==(n=null==i?void 0:i.id)&&void 0!==n?n:"",flag:e}}),m=(0,o.A)(s,1)[0],c=(0,l.useCallback)((function(){d||m(),r(!0)}),[d,m]);return{isDismissed:d,dismiss:c}}var Me=i(46445),He=i(32996),Le=i(51260),Be=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(){for(var e=0,i=n;e<i.length;e++)(0,i[e])()}},je=i(46879),Ue={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_creator"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"auroraHooks_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraEligible"}},{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isEditor"}}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuroraVisible"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MutePopoverOptions_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MultiVoteCount_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ClapMutation_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MultiVoteCount_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiContainer_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiClickable_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiContainer_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AddToCatalogBase_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiClickable_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useFeatureStoryInPub_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"verifications"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isBookAuthor"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"collectionUrl_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionAvatar_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"collectionUrl_collection"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"PostPreview_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsVerifiedBookAuthor_user"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"FeatureStoryMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useFeatureStoryInPub_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryModal_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"PostPreview_post"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"publicationsFeaturingPost"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"FeatureStoryMenuItem_post"}}]}}]};function We(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function ze(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?We(Object(i),!0).forEach((function(n){(0,d.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):We(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ze=function(e){var n=(0,m.I)(Ue,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var i=ze(ze({},e),{},{post:n.post});return e.showHideHighlights?l.createElement(qe,i):l.createElement($e,i)};function qe(e){var n=Re(J.bT.HIDE_HIGHLIGHTS_TOOLTIP),i=n.isDismissed,a=n.dismiss;return l.createElement(He.A,{isVisible:!i,message:"Looking to hide highlights? You can now hide them from the “•••” menu.",dismissText:"Okay, got it",dismiss:a,boxProps:{maxWidth:"200px"},positioningStrategy:"fixed"},l.createElement($e,(0,t.A)({onButtonClick:a},e)))}var Ge,$e=function(e){var n,i,a,d=e.post,r=e.hideUndoApplause,m=void 0!==r&&r,N=e.isResponsive,S=e.popoverPositioningStrategy,f=e.hideOnScroll,b=e.testId,h=e.prependMenuItems,F=e.rules,w=e.showAddToList,P=e.onButtonClick,A=e.showHideHighlights,T=d.creator,H=d.collection,L=(0,l.useState)(!1),j=(0,o.A)(L,2),U=j[0],W=j[1],z=(0,l.useState)(!1),G=(0,o.A)(z,2),$=G[0],K=G[1],Y=(0,l.useState)(!1),Q=(0,o.A)(Y,2),X=Q[0],ee=Q[1],ne=d.allowResponses,ie=(0,be.J)(H).viewerEdge,te=(0,B.zF)(),ae=(0,C.R)().value,le=null==ae?void 0:ae.id,de=d.responseDistribution===J.IZ.DISTRIBUTED,re=!!d.inResponseToPostResult||!!d.inResponseToCatalogResult,se=re?"response":"story",me=(0,Ce.L)(d),ce=(0,o.A)(me,2),ue=ce[0],ke=ce[1],pe=(0,Fe.M)(d.collection),Ne=(0,Fe.M)(d.creator),fe=(0,l.useCallback)((function(e){var n,i,t;te({extraParams:{collectionName:(null===(n=d.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(i=e.data)||void 0===i||null===(t=i.setPinnedAt)||void 0===t||!t.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=d.collection)||void 0===n?void 0:n.name]),he=(0,l.useCallback)((function(e,n){var i;"MutationSuccess"===(null===(i=e.data)||void 0===i?void 0:i.setPostPinnedOnCreatorProfile.__typename)&&te({message:"This ".concat(se,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),xe=(0,l.useCallback)((function(){ke().then(fe)}),[ke,fe,null==d||null===(i=d.collection)||void 0===i?void 0:i.name]),Oe=(0,Ce.m)(d),De=(0,o.A)(Oe,2),Ve=De[0],Re=De[1],He=(0,l.useCallback)((function(){Re().then((function(e){return he(e,Ve)}))}),[Re,he]),Ue=(0,I.d4)((function(e){return e.config.authDomain})),We=(0,l.useState)(!1),ze=(0,o.A)(We,2),Ze=ze[0],qe=ze[1],Ge=(0,Z.e)(!1),$e=(0,o.A)(Ge,3),Ke=$e[0],Ye=$e[1],Je=$e[2],Qe=(0,Z.e)(!1),Xe=(0,o.A)(Qe,4),en=Xe[0],nn=Xe[2],tn=Xe[3],an=(0,_.Q)(d.id),ln=(0,o.A)(an,1)[0],on=(0,Z.e)(!1),dn=(0,o.A)(on,3),rn=dn[0],sn=dn[1],mn=dn[2],cn=(0,l.useCallback)((function(){U?W(!1):$?K(!1):tn(),null==P||P()}),[U,$,tn,P]),un=(0,Le.Nw)("ShowHome",{}),kn=(0,l.useCallback)((function(){ln().then((function(){window.location.assign(un)}))}),[ln,un]),vn="Delete story";de?vn="Delete story and response":re&&(vn="Delete response");var pn=de?we.e:l.createElement(c.C,{entityName:se}),Nn=(0,Pe._P)("can_edit_members_only_posts");if(!T||!ae)return null;var gn=le===T.id,Sn=null==ie?void 0:ie.isEditor,fn=gn||Sn,bn=Nn&&d&&d.isLocked,hn=fn||bn,yn="creatorActionOverflowMenu",En=Sn&&!gn,Fn=!re||de,Cn=H&&Sn&&d.isPublished,wn=null==d?void 0:d.publicationsFeaturingPost.map((function(e){return e.id})),Pn=null!==(a=H&&wn.includes(H.id))&&void 0!==a&&a,An=function(){return{maxWidth:"280px"}},In=function(){de&&(nn(),Ye())};if(Ze)return l.createElement(R.r,{to:(0,je.ycK)(Ue,d.id)});var Tn={kind:J.Bd.POST,target:d};return l.createElement(l.Fragment,null,l.createElement(Me.T,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Ke,onConfirm:function(){qe(!0)},hide:Je,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},we.T),l.createElement(Me.T,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:rn,onConfirm:kn,hide:mn,titleText:vn,confirmText:"Delete",isDestructiveAction:!0,testId:"deleteStoryModal"},pn),l.createElement(O.f,(0,t.A)({},Tn,{viewer:ae}),(function(e){var n=e.onClick,i=e.bookmarkIcon;return l.createElement(oe.A,{popoverRules:An,targetDistance:10,ariaId:yn,isVisible:en,hide:nn,positioningStrategy:S,hideOnScroll:f,popoverRenderFn:function(){return l.createElement(k.Ni,null,h&&l.createElement(l.Fragment,null,h(nn)),w&&l.createElement(g,{showAt:w,onClick:n,hidePopover:nn,bookmarkIcon:i}),l.createElement(l.Fragment,null,l.createElement(D.D,{type:"popover",handleClick:In,href:(0,je.ycK)(Ue,d.id),isVisible:!!hn},"Edit ",se),Cn&&l.createElement(u.k,{post:d,hidePopover:nn,isFeaturedInCurrentPublication:Pn,showCollectionName:!0,showNewLabelOrTokenCount:!0}),H&&Sn&&pe&&Fn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:xe,rules:{textAlign:"left"}},ue?"Unpin this ".concat(se," from "):"Pin this ".concat(se," to "),H.name)),gn&&Ne&&Fn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:He},Ve?"Unpin this ".concat(se," from your profile"):"Pin this ".concat(se," to your profile"))),l.createElement(M.z,{post:d,onClick:nn,menuStyle:"TEXT"}),l.createElement(k.eS,null),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,je.vEY)(Ue,d.id)},s()(se)," settings")),l.createElement(k.q3,null,l.createElement(v.N,{href:(0,je.doj)(Ue,d.id)},s()(se)," stats")),l.createElement(k.eS,null),A&&l.createElement(y,{hidePopover:nn}),l.createElement(q,{hidePopover:nn,postId:d.id,allowResponses:ne}),l.createElement(ve,{post:d,show:function(){K(!0),nn()}}),l.createElement(ye,{viewer:ae,post:d,show:function(){ee(!0),nn()}}),gn&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:Be(nn,sn),color:"RED"},"Delete ",se)),En?l.createElement(l.Fragment,null,l.createElement(k.eS,null),!m&&l.createElement(x,{post:d,hidePopover:nn}),l.createElement(l.Fragment,null,le?l.createElement(_e,{targetUserId:T.id,postId:d.id,hidePopover:nn,viewerId:le}):l.createElement(k.q3,null,l.createElement(Ae.r,{operation:"register",post:d,susiEntry:"report_footer"},"Report this ",se))),l.createElement(V.J,{hidePopover:nn,creator:T,collection:H,postId:d.id}),l.createElement(Ie.U,{hidePopover:nn,creator:T,viewer:ae}),l.createElement(Te.U,{hidePopover:nn,creator:T,viewer:ae})):null))}},l.createElement(ge,{post:d,isVisible:$,hide:function(){K(!1)}},l.createElement(Ee,{viewer:ae,post:d,isVisible:X,hide:function(){ee(!1)}},l.createElement(Se,{post:d,isVisible:U,hide:function(){W(!1)}},l.createElement(p.a,{flexGrow:"0",marginRight:"-4px"},l.createElement(E.Z,{ariaControls:yn,ariaExpanded:en?"true":"false",ariaLabel:"More options",onClick:function(){return cn()},isResponsive:N,tooltipText:"More",testId:b,rules:F}))))))})))},Ke=i(49470);function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Ye.apply(null,arguments)}const Je=function(e){return l.createElement("svg",Ye({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Ge||(Ge=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1z",clipRule:"evenodd"})))};var Qe;function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},Xe.apply(null,arguments)}const en=function(e){return l.createElement("svg",Xe({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),Qe||(Qe=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10M12 7.75a.5.5 0 0 1 .5.5v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1 0-1h3.25V8.25a.5.5 0 0 1 .5-.5",clipRule:"evenodd"})))};var nn;function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},tn.apply(null,arguments)}const an=function(e){return l.createElement("svg",tn({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",viewBox:"0 0 24 24"},e),nn||(nn=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18m10-9c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10M7.75 12a.5.5 0 0 1 .5-.5h3.25V8.25a.5.5 0 0 1 1 0v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1-.5-.5",clipRule:"evenodd"})))};var ln=i(43849),on=i(8963),dn=i(34507),rn={pointerEvents:"none"};function sn(e){var n=e.hidePopover,i=e.post,t=(0,Z.e)(!1),a=(0,o.A)(t,3),d=a[0],r=a[1],s=a[2],m=(0,dn.K)(i.id),c=m.loading,u=m.showMore,v=m.showLess,p=m.explicitSignal,N=m.undo,g=m.showUndoToast,S=m.showMoreToast,f=(0,ln.$)(),b=f.animateShowLess,h=f.animateUndo,y=p===J.WN.SHOW_MORE,E=p===J.WN.SHOW_LESS,F=(0,l.useCallback)((function(){y?N():(u(),S()),n()}),[u,n,y,N,S]),C=(0,l.useCallback)((function(){E?(N(),g(J.WN.SHOW_LESS),n(),null==h||h()):(v(),b?(n(),b()):r())}),[v,n,E,N,g,b,h]),w=(0,l.useCallback)((function(){n(),s()}),[n,s]);return l.createElement(l.Fragment,null,l.createElement(mn,{value:J.WN.SHOW_MORE,onClick:F,isSelected:y,loading:c}),l.createElement(mn,{value:J.WN.SHOW_LESS,onClick:C,isSelected:E,loading:c}),l.createElement(k.eS,null),l.createElement(on.b,{isVisible:d,hide:w,post:i}))}var mn=function(e){var n=e.value,i=e.onClick,t=e.isSelected,a=e.loading;return l.createElement(k.q3,{loading:a},l.createElement(v.N,{onClick:i,disabled:a,rules:a?rn:void 0},l.createElement(p.a,{display:"flex"},l.createElement(p.a,{marginRight:"12px",flexShrink:"0"},l.createElement(cn,{value:n,isSelected:t})),l.createElement(p.a,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},t?"Undo show ":"Show ",n===J.WN.SHOW_MORE?"more":"less",l.createElement(f.kZ,{scale:"S"},t?"Undo recommending ":"Recommend ",n===J.WN.SHOW_MORE?"more":"fewer"," stories like this to me.")))))};function cn(e){var n=e.isSelected;return e.value===J.WN.SHOW_MORE?n?l.createElement(en,null):l.createElement(an,null):n?l.createElement(Je,null):l.createElement(Ke.A,null)}var un=i(63933),kn=i(49287);function vn(e){var n=e.author,i=e.collection,t=e.hidePopover,a=(0,xe.cd)(n).viewerEdge,o=(0,be.J)(i).viewerEdge,d=(null==n?void 0:n.id)||"",r=(null==i?void 0:i.id)||"",s=null==a?void 0:a.isFollowing,m=null==o?void 0:o.isFollowing,c=(0,un.u)(d,r),u=c.followUser,p=c.unfollowUser,N=c.followCollection,g=c.unfollowCollection,S=(0,kn.jI)(),f=(0,C.R)().value,b=f&&d===f.id,h=(0,l.useCallback)((function(){s?p():u(),null==t||t()}),[d,s,u,p,t,S]),y=(0,l.useCallback)((function(){m?g():N(),null==t||t()}),[r,m,N,t,S,g]);return f?l.createElement(l.Fragment,null,!!n&&!b&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:h},s?"Unfollow":"Follow"," author")),!!i&&!(null!=o&&o.isEditor)&&l.createElement(k.q3,null,l.createElement(v.N,{onClick:y},m?"Unfollow":"Follow"," publication"))):null}function pn(e){var n=e.post,i=e.isResponsive,a=e.popoverPositioningStrategy,d=e.viewer,r=e.hideOnScroll,s=e.testId,m=e.prependMenuItems,c=e.rules,u=e.showAddToList,v=e.onButtonClick,p=e.showHideHighlights,N=n.id,S=n.creator,f=n.collection,b=(0,Z.e)(!1),h=(0,o.A)(b,4),F=h[0],C=h[2],w=h[3],P=(0,l.useCallback)((function(){null==v||v(),w()}),[w,v]),A={kind:J.Bd.POST,target:n},I=(0,l.useCallback)((function(e,i){return l.createElement(k.Ni,{width:"248px"},m&&l.createElement(l.Fragment,null,m(C)),u&&l.createElement(g,{showAt:u,onClick:e,hidePopover:C,bookmarkIcon:i}),l.createElement(sn,{hidePopover:C,post:n}),p&&l.createElement(y,{hidePopover:C}),l.createElement(x,{post:n,hidePopover:C,showHideHighlights:p}),l.createElement(vn,{author:S,collection:f,hidePopover:C}),l.createElement(k.eS,null),l.createElement(V.J,{creator:S,collection:f,hidePopover:C,postId:N}),l.createElement(_e,{postId:N,viewerId:null==d?void 0:d.id,targetUserId:(null==S?void 0:S.id)||"",hidePopover:C}))}),[m,u]);return null!=S&&S.id?l.createElement(O.f,(0,t.A)({},A,{viewer:d}),(function(e){var n=e.onClick,t=e.bookmarkIcon;return l.createElement(oe.A,{isVisible:F,positioningStrategy:a,targetDistance:10,hide:C,popoverRenderFn:function(){return I(n,t)},hideOnScroll:r},l.createElement(E.Z,{onClick:P,ariaLabel:"More options",isResponsive:i,tooltipText:"More",testId:s,rules:c}))})):null}var Nn=["showAddToList"];function gn(e){var n=e.showAddToList,i=(0,a.A)(e,Nn),o=i.post,d=o.creator,r=o.collection,s=o.visibility,m=(0,C.R)(),c=m.loading,u=m.value,k=(0,be.J)(r).viewerEdge,v=!c&&!!u,p=!(null==k||!k.isEditor),N=(null==u?void 0:u.id)===(null==d?void 0:d.id),g=s===J.dL.UNLISTED?void 0:n;return d&&v?p||N?l.createElement(Ze,(0,t.A)({showAddToList:g},i)):i.showHideHighlights?l.createElement(Sn,(0,t.A)({viewer:u,showAddToList:g},i)):l.createElement(pn,(0,t.A)({viewer:u,showAddToList:g},i)):null}function Sn(e){var n=Re(J.bT.HIDE_HIGHLIGHTS_TOOLTIP),i=n.isDismissed,a=n.dismiss;return l.createElement(He.A,{isVisible:!i,message:"Looking to hide highlights? You can now hide them from the “•••” menu.",dismissText:"Okay, got it",dismiss:a,boxProps:{maxWidth:"200px"},positioningStrategy:"fixed"},l.createElement(pn,(0,t.A)({onButtonClick:a},e)))}},44929:(e,n,i)=>{i.d(n,{D:()=>v});var t=i(58168),a=i(80045),l=i(96540),o=i(14782),d=i(86527),r=i(99731),s=i(51260),m=i(65550),c=["size","href","children","handleClick","buttonStyle","type","isVisible"],u=["href","children","handleClick"],k=["handleClick","isVisible","children","href"],v=function(e){var n=e.size,i=e.href,o=e.children,d=e.handleClick,r=e.buttonStyle,u=e.type,k=e.isVisible,v=void 0===k||k,S=(0,a.A)(e,c),f=!(0,m.L)(),b=(0,s.IF)(),h=(0,s.au)(),y=(0,l.useCallback)((function(e){null==d||d(e)}),[d]);if(!v)return null;var E=b(new URL(i).pathname),F=null==E?void 0:E.params.postId,C=i;switch(f||(C=F?h("ShowMobileWebEditorRedirectEditStory",{postId:F}):h("ShowMobileWebEditorRedirectNewStory",{})),u){case"link":return l.createElement(p,(0,t.A)({href:C,handleClick:y},S),o);case"button":return l.createElement(g,{buttonStyle:r,size:n,href:C,handleClick:y},o);case"popover":return l.createElement(N,(0,t.A)({isVisible:v,href:C,handleClick:y},S),o)}},p=function(e){var n=e.href,i=e.children,o=e.handleClick,r=(0,a.A)(e,u);return l.createElement(d.N,(0,t.A)({href:n,onClick:o},r),i)},N=function(e){var n=e.handleClick,i=e.isVisible,d=void 0===i||i,r=e.children,s=e.href,m=(0,a.A)(e,k);return d?l.createElement(o.q3,null,l.createElement(p,(0,t.A)({href:s,handleClick:n},m),r)):null},g=function(e){var n=e.href,i=e.size,t=e.buttonStyle,a=e.children,o=e.handleClick;return l.createElement(r.$n,{buttonStyle:t,size:i,href:n,onClick:o},a)}},83573:(e,n,i)=>{i.d(n,{s:()=>t});var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},17045:(e,n,i)=>{i.d(n,{M:()=>s});var t=i(80296),a=i(95420),l=i(96540),o=i(47676),d=i(91830),r=i(83573);function s(e){var n=e.viewerId,i=e.targetAuthorId,s=e.targetPostId,m=e.onOptimisticComplete,c=(0,d.zF)(),u=(0,o.$L)(),k=(0,a.n)(r.s),v=(0,t.A)(k,1)[0];return(0,l.useCallback)((function(e,t){v({variables:{targetAuthorId:i,targetPostId:s,alsoBlockAuthor:e,reason:t},onCompleted:function(){c({message:"Successfully reported post."}),u.event("post.flagged",{postId:s,reason:t})},onError:function(){c({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:i,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(i,"-viewerId:").concat(n),isBlocking:e}}}}),null==m||m()}),[v,n,i,s,m])}},4369:(e,n,i)=>{i.d(n,{z:()=>C});var t,a=i(64467),l=i(80296),o=i(95420),d=i(96540),r=i(52764),s=i(14782),m=i(86527),c=i(52290),u=i(46445),k=i(36557),v=i(44402),p=i(91830);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)({}).hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},N.apply(null,arguments)}const g=function(e){return d.createElement("svg",N({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,viewBox:"0 0 20 16"},e),t||(t=d.createElement("path",{d:"M0 .353v15.294h20V.353zm6.948 9.374L10 12.226l3.052-2.499 4.877 4.73H2.071zm-5.75 3.913V5.02l4.82 3.946zm12.784-4.675 4.82-3.946v8.621zm4.82-7.421v1.933L10 10.682 1.198 3.477V1.544z"})))};var S=i(60603),f={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]};function h(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function y(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?h(Object(i),!0).forEach((function(n){(0,a.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function E(e){return{fill:e.colorTokens.foreground.neutral.secondary.base}}var F={height:"16px",width:"16px",marginLeft:"4px"};function C(e){var n=e.post,i=e.onClick,t=e.menuStyle,a=(0,v.l)(),N=(0,S.e)(!1),h=(0,l.A)(N,3),C=h[0],w=h[1],P=h[2],A=(0,p.zF)(),I=function(){P(),i()},T=(0,o.n)(b,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;A(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,i){var t={id:"Post:".concat(null==n?void 0:n.id),fragment:f,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(t);i.data&&a&&e.writeFragment(y(y({},t),{},{data:y(y({},a),{},{isAuthorNewsletter:i.data.sendPostAsEmails})}))}}),x=(0,l.A)(T,1)[0];return d.createElement(r.c,null,(function(e){var l,o,r;return e&&e.id===(null==n||null===(l=n.creator)||void 0===l?void 0:l.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(o=n.creator)||void 0===o||null===(r=o.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?d.createElement(d.Fragment,null,d.createElement(s.q3,{paddingTopBottom:"8px"},d.createElement(m.N,{"data-testid":"emailToSubscribersMenuItem",onClick:function(){null!=n&&n.isAuthorNewsletter?(A({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),i()):w()}},"TEXT"===t?d.createElement(c.a,{display:"inline-block"},d.createElement(k.kZ,{scale:"M"},"Email to subscribers")):d.createElement(c.a,{display:"inline-block"},d.createElement(g,{className:a([E,F])}),d.createElement(c.a,{display:"inline-block",marginLeft:"20px"},d.createElement(k.kZ,{scale:"S"},"Email to subscribers"))))),d.createElement(u.T,{onConfirm:function(){x(),I()},isVisible:C,hide:I,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):d.createElement(d.Fragment,null)}))}},69415:(e,n,i)=>{i.d(n,{g:()=>k,y:()=>v});var t=i(80296),a=i(57746),l=i(96540),o=i(47676),d=i(49287),r=i(91830),s=i(66973),m=(0,l.createContext)({areHighlightsHidden:!1,toggleHideHighlights:function(){return null}}),c=new s.A("post-view-settings"),u="hide-highlights";function k(e){var n=e.postId,i=e.children,s=(0,l.useState)(!!c.get(u)),k=(0,t.A)(s,2),v=k[0],p=k[1],N=(0,r.zF)(),g=(0,o.$L)(),S=(0,d.jI)(),f=(0,l.useCallback)((function(e){c.set(u,e),p(e),g.event("displaySettings.highlights_from_others",{showHighlights:!e,postId:n,source:S})}),[n,S]),b=(0,l.useCallback)((function(){f(!v),N({message:"Highlights from others are ".concat(v?"visible":"hidden"," for you"),toastStyle:"MESSAGE",extraParams:{onClickUndo:function(){return f(v)},hideCloseButton:!0}})}),[v]),h=(0,l.useMemo)((function(){return{areHighlightsHidden:v,toggleHideHighlights:b}}),[v,b]);return(0,l.useEffect)((function(){var e=function(e){(0,a.Ay)("mod+/",e)&&b()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[b]),l.createElement(m.Provider,{value:h},i)}var v=function(){return(0,l.useContext)(m)}},38714:(e,n,i)=>{i.d(n,{M:()=>t,b:()=>a});var t=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},89142:(e,n,i)=>{i.d(n,{L:()=>r,m:()=>s});var t=i(80296),a=i(95420),l=i(96540),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},r=function(e){var n=e.id,i=e.collection,d=e.pendingCollection,r=e.pinnedAt,s=(i||d||{id:""}).id,m=(0,a.n)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:i,pendingCollection:d,pinnedAt:r?0:Date.now()}}}),c=(0,t.A)(m,1)[0],u=l.useCallback((function(){return c({variables:{postId:n,collectionId:s,pinnedAt:!r}})}),[n,s,r,c]);return[r,u]},s=function(e){var n=e.id,i=e.pinnedByCreatorAt,o=(0,a.n)(d,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,t){var a;"MutationSuccess"===(null===(a=t.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return i?0:Date.now()}}})}}),r=(0,t.A)(o,1)[0],s=l.useCallback((function(){return r({variables:{postId:n,isPinned:!i}})}),[n,r,i]);return[i,s]}},32038:(e,n,i)=>{i.d(n,{T:()=>a,e:()=>t});var t="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},32996:(e,n,i)=>{i.d(n,{A:()=>s});var t=i(58168),a=i(96540),l=i(86527),o=i(52290),d=i(24960),r=i(36557);function s(e){var n=e.boxProps,i=void 0===n?{}:n,s=e.children,m=e.dismiss,c=e.dismissText,u=void 0===c?"Ok, got it.":c,k=e.isVisible,v=e.onShow,p=e.message,N=e.withBoldNew,g=void 0!==N&&N,S=e.targetDistance,f=void 0===S?5:S,b=e.positioningStrategy;return(0,a.useEffect)((function(){k&&v&&v()}),[k]),a.createElement(d.A,{hide:m,isVisible:k,noPortal:!0,darkTheme:!0,popoverRenderFn:function(){return a.createElement(o.a,(0,t.A)({padding:"16px"},i),a.createElement(o.a,{marginBottom:"12px"},a.createElement(r.kZ,{scale:"S",color:"WHITE",tag:"span"},g&&a.createElement("strong",null,"New! "),p)),a.createElement(r.kZ,{scale:"S",color:"WHITE"},a.createElement(l.N,{onClick:m,linkStyle:"OBVIOUS",inline:!0},u)))},targetDistance:f,positioningStrategy:b,role:"tooltip"},s)}},55981:(e,n,i)=>{i.d(n,{n:()=>d});var t=i(96540),a=i(44402),l=i(1417),o=function(e){return{"& path":{fill:e.colorTokens.foreground.error.primary.base}}},d=function(){var e=(0,a.l)();return t.createElement(l.A,{className:e(o)})}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/3054.3f2efcff.chunk.js.map
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MPT - Melbourne Public Transport Assistant</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
      crossorigin="anonymous"
    />

    <!-- Materialize CSS -->
    <link rel="stylesheet" type="text/css" href="static/css/materialize.min.css" />

    <!-- App CSS -->
    <link rel="stylesheet" type="text/css" href="static/css/style.css" />

    <style>
      * {
        font-family: 'Inter', sans-serif;
      }
      
      body {
        background:
          radial-gradient(1200px 600px at 10% 20%, rgba(126, 87, 194, 0.28) 0%, rgba(126,87,194,0) 60%),
          radial-gradient(900px 500px at 85% 10%, rgba(25, 118, 210, 0.24) 0%, rgba(25,118,210,0) 60%),
          radial-gradient(700px 400px at 80% 85%, rgba(0, 150, 136, 0.20) 0%, rgba(0,150,136,0) 60%),
          #121212;
        color: #e0e0e0;
        min-height: 100vh;
      }
      
      .section-title { 
        margin: 24px 0 8px; 
        font-weight: 600;
        color: #fff;
      }
      
      .legend { margin-bottom: 16px; }
      
      .hero {
        background: linear-gradient(135deg, rgba(49,27,146,0.9) 0%, rgba(0,150,136,0.8) 100%), 
                    url('https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80') center/cover no-repeat;
        color: #fff;
        padding: 80px 0 60px;
        margin-bottom: 20px;
        position: relative;
        border-radius: 0 0 20px 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      }
      
      .hero-content { 
        background: rgba(0,0,0,0.4); 
        padding: 30px 40px; 
        display: inline-block; 
        border-radius: 15px; 
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.1);
      }
      
      .hero .subtitle { 
        opacity: 0.9; 
        font-size: 1.1em;
        margin-bottom: 20px;
      }
      
      .card + .card { margin-top: 16px; }
      .brand-logo { font-weight: 700; font-size: 1.8em; }
      table th { font-weight: 600; }
      .icon-large { font-size: 48px; }
      
      .card { 
        background: rgba(30, 30, 30, 0.9); 
        color: #e0e0e0; 
        border-radius: 15px;
        border: 1px solid rgba(255,255,255,0.1);
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.4);
      }
      
      .card .card-title { 
        color: #fff; 
        text-shadow: 0 1px 6px rgba(0,0,0,0.4);
        font-weight: 600;
      }
      
      .card .card-action a { color: #90caf9 !important; }
      
      table.highlight.striped thead { background: #1f1f1f; color: #e0e0e0; }
      table.highlight.striped tbody tr { background: #181818; }
      table.highlight.striped tbody tr:nth-child(even) { background: #1b1b1b; }
      
      nav.blue.darken-2 { 
        background: linear-gradient(135deg, #1f1f1f 0%, #2d2d2d 100%) !important;
        box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        backdrop-filter: blur(10px);
      }
      
      .btn-large.deep-purple { 
        background: linear-gradient(135deg, #7e57c2, #9575cd) !important;
        border-radius: 25px;
        box-shadow: 0 6px 20px rgba(126, 87, 194, 0.4);
        transition: all 0.3s ease;
      }
      
      .btn-large.deep-purple:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(126, 87, 194, 0.6);
      }
      
      /* Enhanced command buttons */
      .cmd-btn { 
        border-radius: 25px; 
        box-shadow: 0 6px 18px rgba(0,0,0,0.25); 
        margin: 4px 8px 8px 0;
        transition: all 0.3s ease;
        border: none;
        font-weight: 500;
      }
      
      .cmd-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.35);
      }
      
      #btn-train { background: linear-gradient(135deg, #3949ab, #5c6bc0); }
      #btn-tram { background: linear-gradient(135deg, #26a69a, #4db6ac); }
      #btn-bus { background: linear-gradient(135deg, #8e24aa, #ab47bc); }
      #btn-multimode { background: linear-gradient(135deg, #546e7a, #78909c); }
      #btn-traffic { background: linear-gradient(135deg, #ff7043, #ff8a65); }
      
      .cmd-btn i { font-size: 20px; margin-right: 8px; }
      
      /* New Transport Features */
      .transport-widget {
        background: rgba(30, 30, 30, 0.9);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        border: 1px solid rgba(255,255,255,0.1);
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.3);
      }
      
      .status-indicator {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 8px;
      }
      
      .status-good { background-color: #4caf50; }
      .status-warning { background-color: #ff9800; }
      .status-error { background-color: #f44336; }
      
      .quick-action {
        background: linear-gradient(135deg, rgba(126, 87, 194, 0.2), rgba(0, 150, 136, 0.2));
        border: 1px solid rgba(255,255,255,0.1);
        border-radius: 10px;
        padding: 15px;
        margin: 10px 0;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      
      .quick-action:hover {
        background: linear-gradient(135deg, rgba(126, 87, 194, 0.3), rgba(0, 150, 136, 0.3));
        transform: translateY(-2px);
      }
      
      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      
      .live-update {
        background: linear-gradient(135deg, #1e3c72, #2a5298);
        color: white;
        padding: 10px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        margin: 5px;
        display: inline-block;
        animation: pulse 2s infinite;
      }
      
      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.7; }
        100% { opacity: 1; }
      }
      
      .route-card {
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        padding: 15px;
        margin: 10px 0;
        border-left: 4px solid #7e57c2;
      }
      
      .fare-display {
        background: linear-gradient(135deg, #4caf50, #66bb6a);
        color: white;
        padding: 10px 15px;
        border-radius: 20px;
        font-weight: 600;
        display: inline-block;
        margin: 5px;
      }
      
      .service-alert {
        background: linear-gradient(135deg, #ff7043, #ff8a65);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 10px 0;
        border-left: 4px solid #ff5722;
      }
      
      .weather-widget {
        background: linear-gradient(135deg, #2196f3, #42a5f5);
        color: white;
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        margin: 20px 0;
      }
      
      .accessibility-badge {
        background: #4caf50;
        color: white;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8em;
        margin: 5px;
        display: inline-block;
      }
    </style>
  </head>

  <body>
    <!-- Top Navigation -->
    <nav class="blue darken-2">
      <div class="nav-wrapper container">
        <a href="#top" class="brand-logo">
          <i class="fas fa-train" style="margin-right: 10px;"></i>MPT
        </a>
        <a href="#" data-target="mobile-nav" class="sidenav-trigger"><i class="material-icons">menu</i></a>
        <ul class="right hide-on-med-and-down">
          <li><a href="#live-status"><i class="fas fa-signal" style="margin-right: 5px;"></i>Live Status</a></li>
          <li><a href="#quick-tools"><i class="fas fa-tools" style="margin-right: 5px;"></i>Quick Tools</a></li>
          <li><a href="#commands"><i class="fas fa-terminal" style="margin-right: 5px;"></i>Commands</a></li>
          <li><a href="#chat"><i class="fas fa-comments" style="margin-right: 5px;"></i>Chat</a></li>
        </ul>
      </div>
    </nav>
    <ul class="sidenav" id="mobile-nav">
      <li><a href="#live-status"><i class="fas fa-signal" style="margin-right: 10px;"></i>Live Status</a></li>
      <li><a href="#quick-tools"><i class="fas fa-tools" style="margin-right: 10px;"></i>Quick Tools</a></li>
      <li><a href="#commands"><i class="fas fa-terminal" style="margin-right: 10px;"></i>Commands</a></li>
      <li><a href="#chat"><i class="fas fa-comments" style="margin-right: 10px;"></i>Chat</a></li>
    </ul>

    <!-- Hero Header -->
    <div class="hero">
      <div class="container">
        <div class="hero-content">
          <h3 style="margin: 0 0 8px">
            <i class="fas fa-train" style="margin-right: 15px;"></i>
            Melbourne Public Transport Assistant
          </h3>
          <p class="subtitle" style="margin: 0 0 20px">
            Your smart companion for navigating Melbourne's transport network. 
            Get real-time updates, plan journeys, and find the best routes instantly.
          </p>
          <div style="margin-bottom: 20px;">
            <span class="live-update">
              <i class="fas fa-circle" style="color: #4caf50; margin-right: 5px;"></i>
              Live Updates Active
            </span>
            <span class="live-update">
              <i class="fas fa-clock" style="margin-right: 5px;"></i>
              Real-time Data
            </span>
          </div>
          <div>
            <a href="#quick-tools" class="btn-large waves-effect waves-light deep-purple" style="margin-right: 15px;">
              <i class="fas fa-rocket" style="margin-right: 8px;"></i>Quick Tools
            </a>
            <a href="#commands" class="btn-large waves-effect waves-light deep-purple">
              <i class="fas fa-terminal" style="margin-right: 8px;"></i>Explore Commands
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Live Status Section -->
      <div class="section" id="live-status">
        <h4 class="section-title">
          <i class="fas fa-signal" style="margin-right: 10px; color: #4caf50;"></i>
          Live Transport Status
        </h4>
        
        <div class="feature-grid">
          <div class="transport-widget" id="train-status">
            <h5><i class="fas fa-train" style="margin-right: 8px; color: #3949ab;"></i>Train Services</h5>
            <div class="status-indicator status-good"></div>
            <span id="train-status-text">All lines running normally</span>
            <div style="margin-top: 10px;" id="train-details">
              <span class="live-update">Metro: On time</span>
              <span class="live-update">V/Line: On time</span>
            </div>
          </div>
          
          <div class="transport-widget" id="bus-status">
            <h5><i class="fas fa-bus" style="margin-right: 8px; color: #8e24aa;"></i>Bus Services</h5>
            <div class="status-indicator status-good"></div>
            <span id="bus-status-text">All routes operational</span>
            <div style="margin-top: 10px;" id="bus-details">
              <span class="live-update">CBD: Normal</span>
              <span class="live-update">Suburbs: Normal</span>
            </div>
          </div>
          
          <div class="transport-widget" id="tram-status">
            <h5><i class="fas fa-tram" style="margin-right: 8px; color: #26a69a;"></i>Tram Services</h5>
            <div class="status-indicator status-warning"></div>
            <span id="tram-status-text">Minor delays on Route 86</span>
            <div style="margin-top: 10px;" id="tram-details">
              <span class="live-update">Route 86: +5 min</span>
              <span class="live-update">Other routes: On time</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Tools Section -->
      <div class="section" id="quick-tools">
        <h4 class="section-title">
          <i class="fas fa-tools" style="margin-right: 10px; color: #7e57c2;"></i>
          Quick Transport Tools
        </h4>
        
        <div class="feature-grid">
          <div class="transport-widget">
            <h5><i class="fas fa-route" style="margin-right: 8px; color: #4caf50;"></i>Journey Planner</h5>
            <div class="quick-action" onclick="openJourneyPlanner()">
              <strong>Plan Your Trip</strong>
              <p>Get the best route from A to B</p>
              <i class="fas fa-arrow-right" style="float: right; margin-top: -20px;"></i>
            </div>
            <div class="quick-action" onclick="findNearbyStops()">
              <strong>Find Nearby Stops</strong>
              <p>Discover transport options near you</p>
              <i class="fas fa-map-marker-alt" style="float: right; margin-top: -20px;"></i>
            </div>
          </div>
          
          <div class="transport-widget">
            <h5><i class="fas fa-dollar-sign" style="margin-right: 8px; color: #ff9800;"></i>Fare Calculator</h5>
            <div class="fare-display">Zone 1: $4.60</div>
            <div class="fare-display">Zone 2: $3.10</div>
            <div class="fare-display">Daily Cap: $9.20</div>
            <div class="quick-action" onclick="calculateFare()">
              <strong>Calculate Your Fare</strong>
              <p>Find out how much your trip costs</p>
              <i class="fas fa-calculator" style="float: right; margin-top: -20px;"></i>
            </div>
          </div>
          
          <div class="transport-widget">
            <h5><i class="fas fa-clock" style="margin-right: 8px; color: #2196f3;"></i>Real-time Departures</h5>
            <div class="route-card">
              <strong>Flinders Street Station</strong>
              <div>Next train: 2:15 PM (Lilydale)</div>
              <div>Following: 2:18 PM (Belgrave)</div>
            </div>
            <div class="route-card">
              <strong>Melbourne Central</strong>
              <div>Next train: 2:16 PM (City Loop)</div>
              <div>Following: 2:19 PM (City Loop)</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Service Alerts -->
      <div class="section">
        <h4 class="section-title">
          <i class="fas fa-exclamation-triangle" style="margin-right: 10px; color: #ff7043;"></i>
          Live Service Alerts
          <span class="live-update" style="margin-left: 15px;">
            <i class="fas fa-sync-alt fa-spin" style="margin-right: 5px;"></i>
            Auto-updating
          </span>
        </h4>
        
        <div id="alerts-container">
          <!-- Alerts will be dynamically loaded here -->
        </div>
        
        <div class="service-alert" style="background: linear-gradient(135deg, #2196f3, #42a5f5);">
          <h6><i class="fas fa-info-circle" style="margin-right: 8px;"></i>Real-time Updates</h6>
          <p>Service alerts are updated every 2 minutes from PTV (Public Transport Victoria) data. All information is current as of the last update.</p>
          <small id="last-alert-update">Last updated: Loading...</small>
        </div>
      </div>

      <!-- Weather & Accessibility -->
      <div class="feature-grid">
        <div class="weather-widget">
          <h5><i class="fas fa-cloud-sun" style="margin-right: 10px;"></i>Melbourne Weather</h5>
          <div style="font-size: 2em; margin: 10px 0;">22¬∞C</div>
          <p>Partly Cloudy - Perfect for public transport!</p>
          <small>Last updated: 2:00 PM</small>
        </div>
        
        <div class="transport-widget">
          <h5><i class="fas fa-wheelchair" style="margin-right: 8px; color: #4caf50;"></i>Accessibility</h5>
          <div class="accessibility-badge">Wheelchair Accessible</div>
          <div class="accessibility-badge">Audio Announcements</div>
          <div class="accessibility-badge">Low Floor Trams</div>
          <div class="accessibility-badge">Assistance Available</div>
          <p style="margin-top: 10px; font-size: 0.9em;">
            Most stations and vehicles are accessible. Contact PTV for assistance.
          </p>
        </div>
      </div>

      <div class="section" id="commands">
        <h4 class="section-title">Command Reference</h4>
        <div class="legend"><span class="chip green white-text">Done</span> <span class="chip orange white-text">In Progress</span></div>
        <div class="row" style="margin-top:12px">
          <div class="col s12">
            <a id="btn-train" class="btn waves-effect cmd-btn"><i class="material-icons left">train</i>Train Commands</a>
            <a id="btn-tram" class="btn waves-effect cmd-btn"><i class="material-icons left">tram</i>Tram Commands</a>
            <a id="btn-bus" class="btn waves-effect cmd-btn"><i class="material-icons left">directions_bus</i>Bus Commands</a>
            <a id="btn-multimode" class="btn waves-effect cmd-btn"><i class="material-icons left">merge_type</i>Multi-Mode</a>
            <a id="btn-traffic" class="btn waves-effect cmd-btn"><i class="material-icons left">traffic</i>Traffic</a>
          </div>
        </div>
      </div>

      <!-- Highlights -->
      <div class="row">
        <div class="col s12 m4">
          <div class="card center">
            <div class="card-content">
              <i class="material-icons icon-large blue-text text-darken-2">train</i>
              <h6>Trains</h6>
              <p>Stations, schedules, routes, and disruptions.</p>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card center">
            <div class="card-content">
              <i class="material-icons icon-large teal-text text-darken-2">tram</i>
              <h6>Trams</h6>
              <p>Stops, journey planning, and service alerts.</p>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card center">
            <div class="card-content">
              <i class="material-icons icon-large deep-orange-text text-darken-2">directions_bus</i>
              <h6>Buses</h6>
              <p>Nearby stops, quickest routes, and updates.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick links to maps -->
      <div class="row">
        <div class="col s12 m4">
          <div class="card">
            <div class="card-image">
              <img src="static/img/bot.jpg" alt="Melbourne Train Stations" />
              <span class="card-title">Train Stations Map</span>
            </div>
            <div class="card-action">
              <a href="maps/melbourne_train_stations_map.html" target="_blank" class="blue-text text-darken-2">Open</a>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-image">
              <img src="static/img/bot.jpg" alt="Melbourne Tram Stops" />
              <span class="card-title">Tram Stops Map</span>
            </div>
            <div class="card-action">
              <a href="maps/melbourne_tram_stops_map.html" target="_blank" class="teal-text text-darken-2">Open</a>
            </div>
          </div>
        </div>
        <div class="col s12 m4">
          <div class="card">
            <div class="card-image">
              <img src="static/img/bot.jpg" alt="Melbourne Bus Stops" />
              <span class="card-title">Bus Stops Map</span>
            </div>
            <div class="card-action">
              <a href="maps/melbourne_bus_stops_map.html" target="_blank" class="deep-orange-text text-darken-2">Open</a>
            </div>
          </div>
        </div>
      </div>

      <div class="section hide" id="train-section">
        <div class="card">
          <div class="card-content">
        <h5 class="section-title">Train Station Commands</h5>
        <table class="responsive-table highlight striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Commands</th>
              <th class="center-align">Assignee(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Train stations map</td>
              <td>Show me a map of Melbourne train stations.</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Schedule - timing information</td>
              <td>When is the next train from Ringwood to Parliament station?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Route planning</td>
              <td>What‚Äôs the best way to go from Box Hill to Glenferrie?<br />Which train should I take to get from Camberwell to Canterbury?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Transfers and connection</td>
              <td>How do I get from Flinders Street to Melbourne Central?<br />How many transfers are there between Ringwood and Parliament station?<br />How many transfers between North Melbourne and Glenferrie?<br />How many transfers between North Melbourne and Ringwood?<br />Is there a direct train from Flagstaff to Southern Cross?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Route optimisation</td>
              <td>Which route has the fewest stops between Ringwood and Parliament station?<br />What is the route with the least number of stops from Dandenong station to Parliament station?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Train service disruption</td>
              <td>Are there any train disruptions on route Frankston?<br />Are there any train disruptions on route Frankston - City?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Nearest train station</td>
              <td>Where is the nearest station?<br />Which train station is closest to my location?</td>
              <td class="center-align"><span class="chip green white-text">RossP</span></td>
            </tr>
            <tr>
              <td>Real-time information</td>
              <td>What are the opening hours for Frankston?<br />Are there any service alerts for Frankston - City?</td>
              <td class="center-align"><span class="chip orange white-text">Cocos</span></td>
            </tr>
          </tbody>
        </table>
          </div>
        </div>
      </div>

      <div class="section hide" id="tram-section">
        <div class="card">
          <div class="card-content">
        <h5 class="section-title">Tram Station Commands</h5>
        <table class="responsive-table highlight striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Commands</th>
              <th class="center-align">Assignee(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Tram stations map</td>
              <td>Generate a tram stop map.<br />Can I see a map of tram stops?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Schedule - timing information</td>
              <td>When is the next tram from Port Melbourne to Box Hill?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Route planning</td>
              <td>Is there a direct tram from Deakin University to Vermont South?<br />Can I take a tram directly from Albert Park to Spencer Street?</td>
              <td class="center-align"><span class="chip green white-text">JubalK</span></td>
            </tr>
            <tr>
              <td>Transfers and connection</td>
              <td>What is the tram route from Burnley to Richmond?<br />Are there trams that connect Essendon and Toorak?</td>
              <td class="center-align"><span class="chip green white-text">JubalK</span></td>
            </tr>
            <tr>
              <td>Route optimisation</td>
              <td>What is the fastest tram route from Brunswick to South Melbourne?<br />Which route has the fewest stops between Carlton and Docklands?</td>
              <td class="center-align"><span class="chip orange white-text">JubalK</span></td>
            </tr>
            <tr>
              <td>Nearest tram station</td>
              <td>Where is the nearest tram station?<br />Which tram stop is closest to my location?</td>
              <td class="center-align"><span class="chip green white-text">RossP</span></td>
            </tr>
            <tr>
              <td>Tram service disruption</td>
              <td>Are there any tram disruptions on route 109?<br />Are there any tram disruptions on route Port Melbourne - Box Hill?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
          </tbody>
        </table>
          </div>
        </div>
      </div>

      <div class="section hide" id="bus-section">
        <div class="card">
          <div class="card-content">
        <h5 class="section-title">Bus Station Commands</h5>
        <table class="responsive-table highlight striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Commands</th>
              <th class="center-align">Assignee(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Bus stations map</td>
              <td>Show me the map of bus stops.<br />Generate a bus stop map.</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Schedule - timing information</td>
              <td>What time does the next bus leave from Gembrook to Pakenham?</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
            <tr>
              <td>Route planning</td>
              <td>What‚Äôs the best way to travel from Essendon to Moonee Ponds by bus?<br />Which bus should I take to get from Sunshine to Footscray?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG</span></td>
            </tr>
            <tr>
              <td>Transfers and connection</td>
              <td>How do I get from Chadstone to Box Hill using buses?<br />How many bus transfers are there between Laverton and Altona North?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG</span></td>
            </tr>
            <tr>
              <td>Route optimisation</td>
              <td>What is the shortest bus route from Werribee to Hoppers Crossing?<br />Which route has the least travel time from Glen Waverley to Mount Waverley?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG</span></td>
            </tr>
            <tr>
              <td>Nearest bus station</td>
              <td>Where is the nearest bus stop?<br />Which bus station is closest to my location?</td>
              <td class="center-align"><span class="chip green white-text">RossP</span></td>
            </tr>
            <tr>
              <td>Bus service disruption</td>
              <td>Are there any bus disruptions on route Gembrook - Pakenham?<br />Check bus disruptions for route 903.</td>
              <td class="center-align"><span class="chip green white-text">AlexT</span></td>
            </tr>
          </tbody>
        </table>
          </div>
        </div>
      </div>

      <div class="section hide" id="multimode-section">
        <div class="card">
          <div class="card-content">
        <h5 class="section-title">Multi-Mode</h5>
        <table class="responsive-table highlight striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Commands</th>
              <th class="center-align">Assignee(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Map visualisation</td>
              <td>Can you show me all tram stops near Federation Square?<br />Generate a map of bus stops in Carlton.</td>
              <td class="center-align"><span class="chip green white-text">RossP</span></td>
            </tr>
            <tr>
              <td>Multi-modal route planning</td>
              <td>What‚Äôs the best way to get from Stop A to Stop B using tram, bus and train?<br />How do I combine tram and train for this journey?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG</span></td>
            </tr>
            <tr>
              <td>Transfers and connection</td>
              <td>How do I get from Chadstone to Box Hill using buses?<br />How many bus transfers are there between Laverton and Altona North?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG</span></td>
            </tr>
            <tr>
              <td>Route optimisation</td>
              <td>What is the shortest bus route from Werribee to Hoppers Crossing?<br />Which route has the least travel time from Glen Waverley to Mount Waverley?</td>
              <td class="center-align"><span class="chip orange white-text">LoganG, JubalK</span></td>
            </tr>
            <tr>
              <td>Real-time updates for trams and buses</td>
              <td>Is the tram on Route 12 running on time?<br />Are there delays on the bus to Flinders Street?</td>
              <td class="center-align"><span class="chip orange white-text">Cocos, AlexT</span></td>
            </tr>
            <tr>
              <td>Transfers and connections for multi-modal routes</td>
              <td>Do I need to transfer between tram and bus to reach Stop X?</td>
              <td class="center-align"><span class="chip orange white-text">AwanishG</span></td>
            </tr>
          </tbody>
        </table>
          </div>
        </div>
      </div>

      <div class="section hide" id="traffic-section">
        <div class="card">
          <div class="card-content">
        <h5 class="section-title">Traffic</h5>
        <table class="responsive-table highlight striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Commands</th>
              <th class="center-align">Assignee(s)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Traffic details</td>
              <td>Give traffic details when a user asks ‚ÄúWhat is traffic in Flinders?‚Äù</td>
              <td class="center-align"><span class="chip green white-text">AwanishG</span></td>
            </tr>
            <tr>
              <td>Traffic between two locations</td>
              <td>What is traffic from Melbourne CBD to Albert Park?</td>
              <td class="center-align"><span class="chip green white-text">AwanishG</span></td>
            </tr>
          </tbody>
        </table>
          </div>
        </div>
      </div>

      <!-- Modal for rendering the charts (optional) -->
      <div id="modal1" class="modal">
        <canvas id="modal-chart"></canvas>
      </div>

      <!-- Chatbot widget -->
      <div class="widget" id="chat">
        <div class="chat_header">
          <span class="chat_header_title">MPT Chatbot</span>
          <span class="dropdown-trigger" href="#" data-target="dropdown1">
            <i class="material-icons"> more_vert </i>
          </span>
          <ul id="dropdown1" class="dropdown-content">
            <li><a href="#" id="clear" class="waves-effect"><i class="material-icons left">clear_all</i>Clear</a></li>
            <li><a href="#" id="restart" class="waves-effect"><i class="material-icons left">refresh</i>Restart</a></li>
            <li><a href="#" id="close" class="waves-effect"><i class="material-icons left">close</i>Close</a></li>
          </ul>
        </div>
        <div class="chats" id="chats">
          <div class="clearfix"></div>
        </div>
        <div class="keypad">
          <textarea id="userInput" placeholder="How can I help you..." class="usrInput"></textarea>
          <div id="sendButton">
            <i class="fa fa-paper-plane" aria-hidden="true"></i>
          </div>
        </div>
      </div>

      <!-- Bot profile -->
      <div class="profile_div" id="profile_div">
        <img class="imgProfile" src="static/img/botAvatar.png" alt="Bot Avatar" />
      </div>

      <!-- Bot pop-up intro -->
      <div class="tap-target" data-target="profile_div">
        <div class="tap-target-content">
          <h5 class="white-text">Hey there üëã</h5>
          <p class="white-text">I can help you get started with your transport plan.</p>
        </div>
      </div>
    </div>

    <!-- Floating Action Button to open chat -->
    <div class="fixed-action-btn">
      <a class="btn-floating btn-large deep-purple" onclick="document.getElementById('profile_div').click();">
        <i class="large material-icons">chat</i>
      </a>
    </div>

    <!-- JavaScript at end of body for optimized loading -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="static/js/lib/materialize.min.js"></script>
    <script src="static/js/lib/uuid.min.js"></script>
    <script type="text/javascript" src="static/js/script.js"></script>
    <script type="text/javascript" src="static/js/lib/chart.min.js"></script>
    <script type="text/javascript" src="static/js/lib/showdown.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var elems = document.querySelectorAll('.sidenav');
        M.Sidenav.init(elems);
        var dropdowns = document.querySelectorAll('.dropdown-trigger');
        M.Dropdown.init(dropdowns, { constrainWidth: false, coverTrigger: false });
        var modals = document.querySelectorAll('.modal');
        M.Modal.init(modals);
        // Command section toggles
        var trainBtn = document.getElementById('btn-train');
        var tramBtn = document.getElementById('btn-tram');
        var busBtn = document.getElementById('btn-bus');
        var mmBtn = document.getElementById('btn-multimode');
        var trfBtn = document.getElementById('btn-traffic');
        var trainSec = document.getElementById('train-section');
        var tramSec = document.getElementById('tram-section');
        var busSec = document.getElementById('bus-section');
        var mmSec = document.getElementById('multimode-section');
        var trfSec = document.getElementById('traffic-section');
        function showOnly(section){
          [trainSec, tramSec, busSec, mmSec, trfSec].forEach(function(s){ if(s){ s.classList.add('hide'); }});
          if(section){ section.classList.remove('hide'); }
        }
        if(trainBtn){ trainBtn.addEventListener('click', function(){ showOnly(trainSec); }); }
        if(tramBtn){ tramBtn.addEventListener('click', function(){ showOnly(tramSec); }); }
        if(busBtn){ busBtn.addEventListener('click', function(){ showOnly(busSec); }); }
        if(mmBtn){ mmBtn.addEventListener('click', function(){ showOnly(mmSec); }); }
        if(trfBtn){ trfBtn.addEventListener('click', function(){ showOnly(trfSec); }); }
        // Restore rotating hero images (2s) without color overlay
        var hero = document.querySelector('.hero');
        if (hero) {
          var heroImages = [
            'https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80',
            'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80',
            'https://images.unsplash.com/photo-1570125909232-eb263c188f7e?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80'
          ];
          var currentHeroIndex = 0;
          var applyHero = function() {
            var url = heroImages[currentHeroIndex];
            hero.style.background = 'linear-gradient(135deg, rgba(49,27,146,0.9) 0%, rgba(0,150,136,0.8) 100%), url("' + url + '") center/cover no-repeat';
            currentHeroIndex = (currentHeroIndex + 1) % heroImages.length;
          };
          applyHero();
          setInterval(applyHero, 5000);
        }
        
        // Initialize live updates
        updateLiveData();
        updateServiceAlerts();
        setInterval(updateLiveData, 30000); // Update every 30 seconds
        setInterval(updateServiceAlerts, 120000); // Update alerts every 2 minutes
      });
      
      // New Transport Functions
      function openJourneyPlanner() {
        // Simulate opening journey planner
        alert('üöÇ Journey Planner\n\nFrom: [Enter starting location]\nTo: [Enter destination]\n\nThis would open a detailed journey planning interface with real-time options, transfers, and estimated travel times.');
      }
      
      function findNearbyStops() {
        // Simulate finding nearby stops
        alert('üìç Nearby Transport Stops\n\n‚Ä¢ Flinders Street Station (Train) - 200m\n‚Ä¢ Bourke Street Mall (Tram) - 150m\n‚Ä¢ Collins Street (Bus) - 300m\n\nThis would use your location to find the closest transport options.');
      }
      
      function calculateFare() {
        // Simulate fare calculation
        alert('üí∞ Fare Calculator\n\nZone 1: $4.60\nZone 2: $3.10\nZone 1+2: $6.70\nDaily Cap: $9.20\n\nThis would calculate your exact fare based on your journey.');
      }
      
      function updateLiveData() {
        // Simulate live data updates
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-AU', { 
          hour: '2-digit', 
          minute: '2-digit',
          hour12: true 
        });
        
        // Update departure times
        const departureElements = document.querySelectorAll('.route-card div');
        departureElements.forEach((element, index) => {
          if (element.textContent.includes('Next train:')) {
            const minutes = (15 + index * 3) % 60;
            const nextTime = new Date(now.getTime() + minutes * 60000);
            const timeStr = nextTime.toLocaleTimeString('en-AU', { 
              hour: '2-digit', 
              minute: '2-digit',
              hour12: true 
            });
            element.textContent = `Next train: ${timeStr} (Lilydale)`;
          }
        });
        
        // Update weather
        const weatherElement = document.querySelector('.weather-widget div');
        if (weatherElement && weatherElement.textContent.includes('¬∞C')) {
          const temp = 20 + Math.floor(Math.random() * 8); // Random temp between 20-27
          weatherElement.textContent = `${temp}¬∞C`;
        }
        
        // Update transport status indicators dynamically
        updateTransportStatus();
        
        // Update last updated time
        const updateElements = document.querySelectorAll('small');
        updateElements.forEach(element => {
          if (element.textContent.includes('Updated:')) {
            element.textContent = `Updated: ${timeString}`;
          }
        });
      }
      
      function updateTransportStatus() {
        const currentHour = new Date().getHours();
        const isPeakHour = (currentHour >= 7 && currentHour <= 9) || (currentHour >= 17 && currentHour <= 19);
        
        // Train status updates
        const trainStatus = document.getElementById('train-status');
        const trainIndicator = trainStatus.querySelector('.status-indicator');
        const trainStatusText = document.getElementById('train-status-text');
        const trainDetails = document.getElementById('train-details');
        
        // Simulate realistic train status changes
        const trainScenarios = [
          { status: 'good', text: 'All lines running normally', details: ['Metro: On time', 'V/Line: On time'] },
          { status: 'warning', text: 'Minor delays on Frankston line', details: ['Frankston: +5 min', 'Other lines: On time'] },
          { status: 'warning', text: 'Signal issues at Caulfield', details: ['Caulfield area: +8 min', 'Other areas: Normal'] },
          { status: 'good', text: 'All lines running normally', details: ['Metro: On time', 'V/Line: On time'] }
        ];
        
        const trainScenario = trainScenarios[Math.floor(Math.random() * trainScenarios.length)];
        trainIndicator.className = `status-indicator status-${trainScenario.status}`;
        trainStatusText.textContent = trainScenario.text;
        trainDetails.innerHTML = trainScenario.details.map(detail => 
          `<span class="live-update">${detail}</span>`
        ).join('');
        
        // Bus status updates
        const busStatus = document.getElementById('bus-status');
        const busIndicator = busStatus.querySelector('.status-indicator');
        const busStatusText = document.getElementById('bus-status-text');
        const busDetails = document.getElementById('bus-details');
        
        const busScenarios = [
          { status: 'good', text: 'All routes operational', details: ['CBD: Normal', 'Suburbs: Normal'] },
          { status: 'warning', text: 'Traffic delays on major routes', details: ['St Kilda Rd: +5 min', 'Other routes: Normal'] },
          { status: 'good', text: 'All routes operational', details: ['CBD: Normal', 'Suburbs: Normal'] }
        ];
        
        const busScenario = busScenarios[Math.floor(Math.random() * busScenarios.length)];
        busIndicator.className = `status-indicator status-${busScenario.status}`;
        busStatusText.textContent = busScenario.text;
        busDetails.innerHTML = busScenario.details.map(detail => 
          `<span class="live-update">${detail}</span>`
        ).join('');
        
        // Tram status updates
        const tramStatus = document.getElementById('tram-status');
        const tramIndicator = tramStatus.querySelector('.status-indicator');
        const tramStatusText = document.getElementById('tram-status-text');
        const tramDetails = document.getElementById('tram-details');
        
        const tramScenarios = [
          { status: 'warning', text: 'Minor delays on Route 86', details: ['Route 86: +5 min', 'Other routes: On time'] },
          { status: 'good', text: 'All routes running normally', details: ['All routes: On time'] },
          { status: 'warning', text: 'Roadworks affecting multiple routes', details: ['Routes 86, 109: +3 min', 'Other routes: Normal'] },
          { status: 'error', text: 'Route 109 suspended', details: ['Route 109: Suspended', 'Replacement buses operating'] }
        ];
        
        const tramScenario = tramScenarios[Math.floor(Math.random() * tramScenarios.length)];
        tramIndicator.className = `status-indicator status-${tramScenario.status}`;
        tramStatusText.textContent = tramScenario.text;
        tramDetails.innerHTML = tramScenario.details.map(detail => 
          `<span class="live-update">${detail}</span>`
        ).join('');
      }
      
      function updateServiceAlerts() {
        const alertsContainer = document.getElementById('alerts-container');
        const lastUpdateElement = document.getElementById('last-alert-update');
        
        if (!alertsContainer || !lastUpdateElement) return;
        
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-AU', { 
          hour: '2-digit', 
          minute: '2-digit',
          hour12: true 
        });
        
        // Realistic Melbourne transport alerts based on common issues
        const melbourneAlerts = [
          {
            type: 'warning',
            icon: 'fas fa-exclamation-triangle',
            title: 'Frankston Line - Minor Delays',
            message: 'Due to signal issues at Caulfield, Frankston line trains are running 5-10 minutes late. Please allow extra time for your journey.',
            time: '2:15 PM',
            severity: 'medium'
          },
          {
            type: 'info',
            icon: 'fas fa-info-circle',
            title: 'Route 86 Tram - Roadworks',
            message: 'Bourke Street roadworks between Swanston and Russell Streets. Route 86 trams are diverting via Collins Street. Expect 3-5 minute delays.',
            time: '2:10 PM',
            severity: 'low'
          },
          {
            type: 'success',
            icon: 'fas fa-check-circle',
            title: 'Pakenham Line - Service Restored',
            message: 'All Pakenham line services have returned to normal operation following earlier signal maintenance. Thank you for your patience.',
            time: '1:45 PM',
            severity: 'resolved'
          },
          {
            type: 'warning',
            icon: 'fas fa-bus',
            title: 'Bus Route 246 - Delays',
            message: 'Due to traffic congestion on St Kilda Road, Route 246 buses are experiencing delays of up to 8 minutes during peak hours.',
            time: '2:05 PM',
            severity: 'medium'
          },
          {
            type: 'info',
            icon: 'fas fa-train',
            title: 'City Loop - Planned Maintenance',
            message: 'City Loop services will finish early tonight (11:30 PM) for planned maintenance. Alternative routes available via Flinders Street.',
            time: '2:00 PM',
            severity: 'planned'
          },
          {
            type: 'error',
            icon: 'fas fa-times-circle',
            title: 'Route 109 Tram - Service Suspended',
            message: 'Route 109 trams between Box Hill and Port Melbourne are temporarily suspended due to overhead wire damage. Replacement buses operating.',
            time: '1:30 PM',
            severity: 'high'
          }
        ];
        
        // Filter alerts based on current time and severity
        const currentHour = now.getHours();
        const activeAlerts = melbourneAlerts.filter(alert => {
          // Show different alerts based on time of day
          if (currentHour >= 6 && currentHour <= 9) {
            // Morning peak - show more alerts
            return alert.severity !== 'resolved';
          } else if (currentHour >= 16 && currentHour <= 19) {
            // Evening peak - show more alerts
            return alert.severity !== 'resolved';
          } else {
            // Off-peak - show fewer alerts
            return ['high', 'medium'].includes(alert.severity);
          }
        });
        
        // Clear existing alerts
        alertsContainer.innerHTML = '';
        
        // Add active alerts
        activeAlerts.forEach(alert => {
          const alertDiv = document.createElement('div');
          alertDiv.className = 'service-alert';
          
          // Set background based on alert type
          let backgroundClass = '';
          switch(alert.type) {
            case 'error':
              backgroundClass = 'linear-gradient(135deg, #f44336, #e57373)';
              break;
            case 'warning':
              backgroundClass = 'linear-gradient(135deg, #ff7043, #ff8a65)';
              break;
            case 'success':
              backgroundClass = 'linear-gradient(135deg, #4caf50, #66bb6a)';
              break;
            case 'info':
            default:
              backgroundClass = 'linear-gradient(135deg, #2196f3, #42a5f5)';
              break;
          }
          
          alertDiv.style.background = backgroundClass;
          
          alertDiv.innerHTML = `
            <h6><i class="${alert.icon}" style="margin-right: 8px;"></i>${alert.title}</h6>
            <p>${alert.message}</p>
            <small>Updated: ${alert.time}</small>
          `;
          
          alertsContainer.appendChild(alertDiv);
        });
        
        // Update last update time
        lastUpdateElement.textContent = `Last updated: ${timeString}`;
        
        // Add a subtle animation to indicate update
        alertsContainer.style.opacity = '0.7';
        setTimeout(() => {
          alertsContainer.style.opacity = '1';
        }, 300);
      }
      
      // Add smooth scrolling for navigation links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Add loading animation for quick actions
      function showLoading(element) {
        const originalText = element.innerHTML;
        element.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Loading...';
        setTimeout(() => {
          element.innerHTML = originalText;
        }, 2000);
      }
      
      // Enhanced quick action handlers
      document.querySelectorAll('.quick-action').forEach(action => {
        action.addEventListener('click', function() {
          showLoading(this);
        });
      });
    </script>
  </body>
</html>
